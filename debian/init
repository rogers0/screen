#!/bin/sh
# $Id: init,v 1.3 2004/03/16 01:43:45 zal Exp $
#
# Script to remove stale screen named pipes on bootup.
#

### BEGIN INIT INFO
# Provides:          screen-cleanup
# Required-Start:    $local_fs $remote_fs
# Required-Stop:     $local_fs $remote_fs
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: screen sessions cleaning
### END INIT INFO

set -e

SCREENDIR=/var/run/screen

case "$1" in
start)
    if find $SCREENDIR -type p | grep '^' >/dev/null; then
        echo -n 'Cleaning up stale screen sessions... '
        find $SCREENDIR -type p -print0 | xargs -0 rm -f
        echo "done."
    fi
    ;;
stop|restart|reload|force-reload)
    ;;
esac

exit 0
